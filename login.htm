<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="Libs/jquery-1.11.2.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="Libs/md5.js"></script>
    <script src="Scripts/luntan_.js" type="text/javascript"></script>
    <title>登录</title>
    <style type="text/css">
        body {
            background-color: transparent;
        }

        .STYLE1 {
            font-size: 24px;
        }

        .login {
            width: 300px;
            height: 400px;
            margin: auto;
        }
    </style>
    <script type="text/javascript">
        var userResInfoArray = new Array();
        function check_login() {
            var user_id = document.getElementById("user_id").value;
            var user_password = document.getElementById("user_password").value;
            //参数传输
            localStorage.setItem("userId", user_id);

            //alert(id.value);

            //var user_id=document.forms.form1.user_id.value;
            //var user_password=document.forms.form1.user_password.value;

            if (user_id == " ") {
                alert("手机号不能为空！");
                document.forms.form1.user_id.focus();
                return false;
            }

            callUpInfo(user_id);
            if (userResInfoArray.length == 0) {
                alert("该手机号未注册！");
                document.getElementById("user_id").focus();
                return false;
            }

            if (user_password == "") {
                alert("请输入密码！");
                document.forms.form1.user_password.focus();
                return false;
            }

            if (userResInfoArray[0].Passward != user_password) {
                document.getElementById("user_password").focus();
                alert("密码输入错误！");
                return false;
            }

            //password = hex_md5(user_password);
            //document.forms.form1.md5Pwd.value = password;
            location.href = "luntan.htm";
            //document.form1.submit();
            //$(location).attr('href', "luntan.htm");
        }
        function callUpInfo(user_id) {
            var urlStr = encodeURI("Handler.ashx?method=userrep&ud=" + user_id + "&" + Math.random());
            $.ajax({
                type: "get",
                contentType: "application/json",
                url: urlStr,
                async: false,
                success: showUpInfo
            });
        }
        function showUpInfo(data) {
            if (userResInfoArray != null) {
                userResInfoArray = new Array();
            }
            userResInfoArray = eval('(' + data + ')');
        }
    </script>
</head>
<body>
<div class="login">
    <form class="form1" id="form1" method="post" action="login">
        <h2 align="center" class="STYLE1">用户登录</h2>

        <p>
            <label for="inputText" class="sr-only">Phone Number: </label>
            <input type="text" name="user_id" id="user_id" class="form-control" placeholder="请输入手机号" required oninvalid="setCustomValidity('手机号不能为空')" oninput="setCustomValidity('')" autofocus>
        </p>
        <p>
            <label for="inputPassword" class="sr-only">Password: </label>
            <input type="password" name="user_password" id="user_password" class="form-control" placeholder="请输入密码" required oninvalid="setCustomValidity('密码不能为空')" oninput="setCustomValidity('')">
            <input type="hidden" name="md5Pwd" id="md5Pwd" required>
        </p>
        <!--<div class="checkbox">
      <label>
        <input type="checkbox" value="remember-me"> 记住密码
      </label>
    </div>-->
    </form>
        <p>
            <button class="btn btn-lg btn-primary btn-block" onclick="check_login()" type="submit">登录</button>
            <button class="btn btn-lg btn-primary btn-block" onclick="location.href='initial.htm'" type="submit">返回</button>
        </p>
    
    </div> 
</body>
</html>